/*
*
* mi v 1.0.6
* By Darrel.Hsu
* 
* CopyRight 2011-2012 , web@miliao.com
* 2012-03-12
*
*/
(function(a){M=a.M||{};M.tid=100;M.UA=navigator.userAgent;M.DOC=document;M.genId=function(b){b=b||"MID-";return b+""+this.tid++};M.isOpera=!!window.opera;M.isChrome=!!window.chrome;M.isMozilla=!!window.netscape;M.isIpad=M.UA.indexOf("iPad")>-1;M.isAndroid=M.UA.toLowerCase().indexOf("android")>-1;M.isIphone=M.UA.toLowerCase().indexOf("iphone")>-1;M.isUC=M.UA.toLowerCase().indexOf("ucweb")>-1;M.ability={placeholder:function(){return"placeholder" in document.createElement("input")}(),flash:function(){var b=navigator.plugins;return b.length>0&&function(){for(var c=0,d;d=b[c++];){if(d.name.toLowerCase().indexOf("shockwave flash")>-1){return true}}return false}()}(),audioMp3Supported:function(){if(typeof HTMLAudioElement==="function"||typeof HTMLAudioElement==="object"){var b=new Audio();return b.canPlayType("audio/mpeg")}return false}(),localStorage:function(){return !!window.localStorage}(),fixedSupport:function(){var c=document.createElement("div"),b=c.style;b.cssText="position:absolute;position:fixed;";return b.position=="fixed"}()};M.isEmptyObject=function(b){return(typeof b==="object")&&function(){for(var c in b){}return c===undefined}()};M.params=function(c){c=c||location.search;if(!c){return false}var f=c.split("?");var g={};f=f.length==2?f[1]:f[0];var e=f.split("&");for(var d=0;d<e.length;d++){var b=e[d];b=b.split("=");g[b[0]]=b.slice(1,b.length).join("=")||""}return g};M.decodeParams=function(b){if(typeof b!=="object"){return b}else{var c=[];for(var d in b){c.push(d+"="+encodeURIComponent(b[d]))}return c.join("&")}};M.template=function(b,d,c){var c=c||/\{([\w-]+)\}/g;return b.replace(c,function(e,g){if(d[g]!==undefined){var f;if(d[g] instanceof Function){f=d[g].call(d)}else{f=d[g]}return c.test(f)?M.template(f,d,c):f}else{return""}})};M.locate=function(b){if(!!!b){return window.location.href}else{window.location.href=b}};M.override=function(b,d){if(d){for(var c in d){b.prototype[c]=d[c]}}};M.extend=function(i,c){var e=function(){},h=c,f,g=h,d=i.prototype;var b=Object.prototype.constructor;h=h.constructor!==b?h.constructor:function(){var j=arguments[0];for(var k in j){this[k]=j[k]}if("init" in this&&this["init"] instanceof Function){this.init()}};e.prototype=d;f=h.prototype=new e();f.constructor=h;f.override=function(j){M.override(h,j)};h.extend=function(j){return M.extend(h,j)};M.override(h,g);return h};M.Object=M.extend({},{on:function(f,b){if(f.indexOf(",")>-1){var g=f.split(",");for(var c=0;c<g.length;c++){this.on(g[c],b)}}else{var d=(this.evts=this.evts||{})[f];d=d||(this.evts[f]=[]);d.push(b)}},fire:function(e){console.log("fire event : "+e);this.evts=this.evts||{};var c=Array.prototype.slice.call(arguments,0);c.shift();var b=this.evts[e];if(b instanceof Array){for(var d=0,f;f=b[d++];){this.eventTag=e;f.apply(this,c)}}},hasEvent:function(b){return this.evts&&(b in this.evts)},un:function(g,b){this.evts=this.evts||{};var d=this.evts[g];if(d){if(!!b){for(var c=0,f;f=d[c++];){if(b===f){d.splice(c-1,1);c--}}}else{this.evts[g]=null}}}});M.merge=function(d,c){for(var b in c){d[b]=c[b]}return d};Date.prototype.toSimpleString=function(){var d=this.getHours();var c=this.getMinutes();var e=this.getMonth()+1;var b=this.getDate();return e+"-"+b+" "+(d>9?"":"0")+d+":"+(c>9?"":"0")+c};M.applyIf=M.applyIf||function(e,d){if(arguments[2]){for(var b=2;b<arguments.length;b++){M.applyIf(e,arguments[b])}}if(e&&d&&typeof d=="object"){for(var f in d){if(e.hasOwnProperty(f)){e[f]=d[f]}}}};M.applyIfNot=function(e,f,c){var b=" \u2001";c=b+(c||[]).join(b)+b;for(var d in f){if(!(d in e)&&c.indexOf(b+d+b)<=-1){e[d]=f[d]}}}}(window));M.version="1.0.11.8";(function(M){M.Util={encodeJSON:function(o){if(typeof o==="string"){return(!!JSON&&JSON.parse(o))||eval("("+o+")")}else{return o}},isNaN:function(o){return o!==o},magicCircle:function colorCircle(D,color,xy,deep,Z){var cssText="position:absolute;z-index:{zIndex};width:{DX}px;height:{DY}px;top:-2000px;opacity:0.7;-webkit-border-radius:{D}px;-webkit-box-shadow:{x}px {y}px {deep}px {color}",Dx,Dy;if(typeof D==="object"){Dx=D.x;Dy=D.y;D=(D.x+D.y)/2}else{Dx=Dy=D}cssText=M.template(cssText,{zIndex:Z||"-1",DX:Dx,DY:Dy,D:D,x:xy.x,y:2000+xy.y,color:color,deep:deep||D});new M.Element("div",{style:cssText}).appendTo("body")},getKeys:function(obj){var keys=[],i=0;for(keys[i++] in obj){}return keys},toArray:function(ar){if(M.isIE){var result=[];for(var i=0;i<ar.length;i++){result.push(ar[i])}return result}else{return Array.prototype.slice.call(ar)}},hashParams:function(url){url=(url||location.hash).replace(/(^#|#$)/g);return M.params(url)},hashCookie:function(){var carr=document.cookie.split(";"),hash={};for(var i=0,tmp;tmp=carr[i++];){tmp=tmp.split("=");hash[tmp[0].trim()]=unescape(tmp[1].trim())}return hash},setCookie:function(name,value,expires,path,domain,secure){document.cookie=name+"="+escape(value)+((expires)?"; expires="+expires:"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"")},getCookie:function(name){var key=name+"=",klen=key.length,carr=document.cookie.split(";");for(var i=0,tmp;tmp=carr[i++];){tmp=tmp.trim();if(key==tmp.substring(0,klen)){return unescape(tmp.substring(klen))}}return""},delCookie:function(name,path,domain){M.Util.setCookie(name,"","Thu, 01 Jan 1970 00:00:00 GMT",path,domain)}};M.encode=M.Util.encodeJSON;var Ap=Array.prototype;Ap.getAt=function(index){return this[index]};Ap.each=function(fun){for(var i=0;i<this.length;i++){var result=fun.call(this,this[i],i);if(result!==undefined&&result==false){return i}}};if(!("indexOf" in Ap)){Ap.indexOf=function(element,fromIndex){fromeIndex=fromIndex||0;var find=this.each(function(index,el){if(index>=fromeIndex&&el===element){return false}});return find===undefined?-1:find}}Ap.remove=function(position,total){if(total===undefined){total=1}if(typeof position!=="number"){position=this.indexOf(position)}if(position!==undefined){return this.splice(position,total)}else{return this}};String.prototype.encodeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};String.prototype.decodeHTML=function(){return this.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}}(M));(function(d){var a={change:function(){return document.all?"propertychange":"input"}(),get:function(f){if(f in a&&f!=="get"){return a[f]}else{return f}}};d.ElementEvent=function(e){this.dom=this.isDom(e)?e:e.dom;if(!this.isDom(this.dom)){throw"Dom Error"}};d.ElementEvent=d.extend(d.Object,{constructor:d.ElementEvent,isDom:function(e){if((!e||e.nodeType!=1)&&e!==window){return false}return true},on:function(h,f){var g=this;g.dom.addEventListener(h,f,false);return g},un:function(g,f){this.dom.removeEventListener(g,f,false);return this},fire:function(h,g){h=a.get(h);var f=document.createEvent(g||"HTMLEvents");f.initEvent(h,true,true);this.dom.dispatchEvent(f);return this},change:function(e){var f=this;this.on(a.get("change"),function(){e.call(f)});return this},click:function(e){return this.on("click",e)},tap:function(e){var f=this;if(window.Touch){f.on("touchstart",function g(h){var k=false;function j(){k=true}function i(l){if(!k){e.call(f.dom,h)}f.un("touchmove",j);f.un("touchend",i)}f.on("touchmove",j);f.on("touchend",i)})}else{f.click(e)}},touch:function(e){var f=this;f.dom.addEventListener("touchstart",function(){var k,g,j;function i(m){var l=m.targetTouches[0];if(!k&&!!l){k={x:l.pageX,y:l.pageY}}m.move={x:l.pageX-k.x,y:l.pageY-k.y};m.touchX=l.pageX;m.touchY=l.pageY;m.touchend=false;g=m;j=true;e.call(f,m);m.preventDefault()}var h=function(l){if(j){g.touchend=true;e.call(f,g)}f.dom.removeEventListener("touchmove",i);f.dom.removeEventListener("touchend",h)};f.dom.addEventListener("touchmove",i,false);f.dom.addEventListener("touchend",h,false)},false)},ready:function(e){var f=this.dom;if(f.readyState){f.onreadystatechange=function(){if(f.readyState=="loaded"||f.readyState=="complete"){e.call(this.dom);f.onreadystatechange=null}}}else{f.onload=function(){e.call(this.dom)}}}});var c;d.domReady=false;var b=function(){if(d.domReady){return false}else{d.domReady=true;for(var f=0,e;e=c[f++];){e.call(d)}}};d.ready=function(e){d.domReady=window.clientReady||d.domReady;if(document.readyState=="complete"){e.call(d)}else{if(e instanceof Function){c=c||[];c.push(e);if(d.domReady){b()}else{DOC=document;DOC.addEventListener("DOMContentLoaded",b,false);window.addEventListener("load",b,false)}}}};d.ready(function(){})}(M));(function(h){M$=function(i,j){return new h.Element(i,j)};var a={},b=1;function g(j){var i=j.getAttribute("mjs");if(null==i||i.length<1){i=new Date().getTime()+""+b++;j.setAttribute("mjs",i)}if(i in a){return a[i]}else{var k=new h.ElementEvent(j);k.delegate={};k.EventHashManager=new h.Object();k.delegate={};return a[i]=k}}function d(j,i){mgr=g(j);mgr.fire(i)}h.newElement=function(i,j){return new h.Element(i,j)};var c={"class":function(i){this[0].className=i},html:function(i){this.html(i)},style:function(i){this[0].style.cssText=i},"for":function(i){this[0].htmlFor=i},mjs:function(){},events:function(i){for(var j in i){this.addListener(j,i[j])}}};var e=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;var f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;h.Element=function(l,k){if(!l){return this}if(l instanceof h.Element){return l}if(l instanceof HTMLElement||l instanceof Array){this.setel(l)}if(l instanceof Function){if(document.readyState=="complete"){l()}else{document.addEventListener("DOMContentLoaded",l,false)}return this}if(typeof l==="string"){if(l.charAt(0)==="<"&&l.charAt(l.length-1)===">"&&l.length>=3){var r=f.math(l);if(f){this.setel([document.createElement[r[1]]])}else{this.setel(document.createElement("div").childNodes)}}else{if(h.isWindow(k)){this.setel([k])}else{var m=[],p;if(typeof k=="string"){k=document.querySelectorAll(k)}else{if(k==undefined){k=[document]}else{k=k instanceof NodeList||k instanceof Array?k:[k]}}for(var o=0;o<k.length;o++){p=k[o]?k[o]:document;if(p.querySelectorAll){var s=p.querySelectorAll(l);for(var n=0,q;q=s[n++];){if(m.indexOf(q)<0){m.push(q)}}}}this.setel(m)}}}if(!!k&&!(k instanceof Array)&&!(k instanceof NodeList)){this.attrs(k)}};h.Element=h.extend(h.Object,{constructor:h.Element,getel:function(){var j=[];for(var k=0,l;l=this[k++];){j.push(l)}return j},setel:function(j){var i=this;if(j instanceof Array){j.each(function(l,k){i[k]=l});i.length=j.length}else{i[0]=j;i.length=1}},fireEvent:function(i,j){this.each(function(m){var k=g(m),l=k.EventHashManager;l.fire(i)})},click:function(i){this.addListener("click",i);return this},tap:function(i){this.addListener("tap",i);return this},change:function(i){this.addListener("input",i);return this},touch:function(i){this.addListener("touch",i);return this},undelegate:function(l,i,j){var k=this;k.each(function(p){var q=g(p).delegate;if(i===undefined){for(var n in q){k.removeListener.call([p],n,k._fireDD);delete q[i]}}else{if(l===undefined&&i in q){delete q[i][l]}else{if(i in q){var m=q[i][l];var o=m.indexOf(j);m.splice(o,1);if(m.length==0){delete q[i][l]}if(h.isEmptyObject(q[i])){delete q[i];k.removeListener.call([p],i,k._fireDD)}}}}});return k},delegate:function(l,i,j){var k=this;this.each(function(m){var n=g(m).delegate;if(!(i in n)){k.addListener(i,k._fireDD);n[i]={}}if(n[i][l]===undefined){n[i][l]=[j]}else{n[i][l].push(j)}});return k},_fireDD:function(m){var o=this,i=m.type;var q=g(this).delegate;if(i in q){var p=q[i];var l=o.matchesSelector||o.webkitMatchesSelector;for(var j in p){var k=m.target||m.srcElement;do{var n=true;if(M$(o).contains(k)&&l.call(k,j)){p[j].each(function(r,s){console.log("delegate: "+j);if(r.call(k,m)===false){console.log("FALSE");m.preventDefault();m.stopPropagation();n=false}})}if(!n){break}}while((k=k.parentNode)&&(k!=o))}return this}},addListener:function(i,k,j){this.each(function(p){var m=g(p),n=m.EventHashManager;if(k===undefined){m.fire(i)}else{var l={change:function(q){m.change(function(r){n.fire("change",r)})},tap:function(q){m.tap(function(r){n.fire("tap",r)})},touch:function(q){m.touch(function(r){n.fire("touch",r)})}};if(i in l){var o=h.Util.toArray(arguments);o.shift();l[i].apply(p,o)}else{if(i=="hover"){m.hover(function(q){!!k&&k.call(p,q)},function(q){!!j&&j.call(p,q)})}else{if(!n.hasEvent(i)){m.on(i,function(q){n.fire(i,q)})}}}n.on(i,function(q){k.call(p,q)})}});return this},removeListener:function(i,k){g(this);var l=this,j=l.domEventHash;var m=!!(i in j);if(!!l.evtManager){if(k===undefined){delete j[i];m=false}if((m&&j[i].length<=1)||!m){if(m&&j[i].length==1){j[i].remove(k);delete j[i];m=false}if(!m){l.evtManager.un(i)}}else{j[i].remove(k)}}return l},each:function(k){for(var j=0;j<this.length;j++){k.call(this[j],this[j],j)}},attrs:function(j){for(var i in j){if(i in c){c[i].call(this,j[i])}else{this.set(i,j[i])}}return this},set:function(i,j){this.each(function(){this.setAttribute(i,j)});return this},attr:function(i,j){if(j===undefined&&this.length>0){if(i in this[0]){j=this[0][i]}else{j=this[0].getAttribute(i)}return j}else{return this.set(i,j)}},val:function(i){if(i===undefined){if("value" in this[0]){return this[0].value}else{if("text" in this[0]){return this[0].text}}}else{this.attrsetter("value",i)}},removeAttr:function(i){this.each(function(){this.removeAttribute(i)});return this},hasClass:function(i){return this.length>0&&(" "+this[0].className+" ").indexOf(" "+i+" ")>-1},addClass:function(i){var j=h.Element.prototype;this.each(function(k){if(!j.hasClass.call([k],i)){k.className=(k.className+" "+i).trim()}});return this},toggleClass:function(i){var j=h.Element.prototype;this.each(function(k){if(j.hasClass.call([k],i)){j.removeClass.call([k],i)}else{j.addClass.call([k],i)}});return this},removeClass:function(i){var j=this;j.each(function(m){className=m.className;className=" "+className+" ";var k=i.split(/\s+/);for(var l=0,n;n=k[l++];){if(n.length>0){className=className.replace(" "+n+" "," ")}}className=className.trim().split(/\s+/);m.className=className.join(" ")});return j},hide:function(){this.each(function(){this.style.display="none"});return this},show:function(){this.each(function(){this.style.display="block"});return this},css:function(i,j){if(typeof i=="object"){for(var k in i){this.css(k,i[k])}return this}else{if(j){this.each(function(){this.style[i]=j});return this}else{return this[0].style[i]}}},parent:function(){var i=this[0].parentNode;if(i.nodeType!=1){return new h.Element(i)}else{if(i.parentNode&&(i=i.parentNode)&&i.nodeType!=1){return new h.Element(i)}else{return null}}},next:function(i){if(i){i=i.toUpperCase()}var j=this[0];while(j=j.nextSibling){if(j.nodeType==1&&(!i||i==j.tagName)){return new h.Element(j)}}},get:function(i){return i instanceof Number&&i<this.length?this[i]:null},insertBefore:function(i){if(!(i instanceof h.Element)){i=M$(i)}var j=i[0];j.insertBefore(this[0],i[0])},insertAfter:function(i){if(!(i instanceof h.Element)){i=M$(i)[0]}var j,k=i.parentNode;if(j=i.nextSibling){k.insertBefore(this[0],i)}else{k.appendChild(this[0])}},appendTo:function(i){if(!(i instanceof h.Element)){if(typeof i==="string"){M$(i).append(this)}else{i.appendChild(this[0])}}else{i.append(this)}return this},append:function(l){if(this.length<1){return this}if(l instanceof h.Element){for(var k=0;k<l.length;k++){this.append(l.get(k))}}else{if(typeof l==="string"){var n=this[0].innerHTML;if(n.trim().length<1){this.html(l)}else{var j=document.createElement(this[0].tagName);j.innerHTML=l;var m;while(m=j.firstChild){this.append(m)}}}else{if(this.length>0){this[0].appendChild(l)}}}},contains:function(i){if(i instanceof h.Element){i=i[0]}return this[0].contains(i)},parents:function(i){var j=this[0].parentNode;while(j.nodeType!=1&&j!=document){if(j.webkitMatchesSelector(i)){return new h.Element(j)}}},remove:function(){var j=this;for(var i in j.evts){j.removeListener(i)}this.each(function(){var k=M$(this).attr("mjs");delete a[k].EventHashManager;delete a[k];this.parentNode.removeChild(this)})},text:function(j){var i="innerText" in this[0]?"innerText":"textContent";if(undefined===j){return this[0][i]}else{this.attrsetter(i,j);return this}},attrsetter:function(i,j){this.each(function(l,k){l[i]=j})},html:function(i){if(i===undefined){return this.length>0&&this[0].innerHTML}else{this.attrsetter("innerHTML",i)}return this}});h.ElementsCollection=function(i){if(!(i instanceof Array)){i=[i]}this.el=i;this.length=i.length};h.ElementsCollection=h.extend(h.Object,{constructor:h.ElementsCollection,add:function(i){this.el.join(i.dom||i);this.length=this.el.length},getAt:function(k,j){j=j||document;if(typeof k=="number"){return new h.Element(this.el[k])}else{var n=k.charAt(0),m=[];var o=k.replace(/^[\.#]/,"");for(var l=0;l<this.el.length;l++){if(MSelector.match(j,k,this.el[l])){m.push(new h.Element(this.el[l]))}}return new h.ElementsCollection(m)}},doApply:function(){var k=Array.prototype.slice.call(arguments);var p=k.shift();for(var l=0,o;o=this.el[l++];){var j=new h.Element(o),n=j[p];j[p].apply(j,k)}return this},click:function(i){this.doApply("click",i);return this},tap:function(i){this.doApply("tap",i);return this},hide:function(){this.doApply("hide");return this},show:function(){this.doApply("show");return this}});h.get=function(k,j){j=j||document;if(typeof j==="string"){j=document.querySelector(j)}var i=j.querySelectorAll(k);return i.length==1?i[0]:i};h.getEl=M$;h.compat=function(){return window.document.compatMode==="CSS1Compat"};h.isWindow=function(j){var i=Object.prototype.toString.call(j).toLowerCase();return j!==null&&j!==undefined&&(i=="[object global]"||i=="[object domwindow]"||i=="[object window]")}}(M));(function(){M.Net=M.Net||{};M.net=M.Net;var b=new M.Object();M.Net.ajax=function(){var c={};var i={};function d(n){var m=function(p){for(var o in p){if(/;$/.test(p[o])){n.Ajax(o,p[o]+"charset="+k.coding)}else{n.Ajax.setRequestHeader(o,p[o]+";charset="+k.coding)}}};m(k.defaultHeaders);if(k.headers){m(k.headers)}}function h(){var m;try{m=new XMLHttpRequest()}catch(n){throw"Create Ajax Error ."+n}return{Ajax:m,transId:"ajax-"+(++k.transId)}}function e(m,n){k.headers=k.headers||{};k.headers[m]=n}function f(p){var s=h()||null,t=p.method,n=p.url,m=p.dataType;b.fire("ajaxStart",s.transId,p);c[s.transId]={success:p.success,failure:p.failure};if(s){if(t.toUpperCase()=="GET"&&!M.isEmptyObject(p.data)){var q={};if(n.indexOf("?")>-1){q=M.params(n)}M.merge(q,p.data);n=n.split("?")[0]+"?"+M.decodeParams(q)}s.Ajax.open(t.toUpperCase(),n,p.asynchronous);d(s);if(p.asynchronous){g(s,p)}var r=s.transId;i[r]=setTimeout(function(){if(r in c){j(s,p,c[s.transId]["failure"])}delete c[r]},p.timeout||s.timeout);s.Ajax.send(M.decodeParams(p.data)||null);if(!p.asynchronous){l(s,p)}}}function j(q,n,m){var p=q.Ajax;p.abort();if("onTimeout" in n){n.onTimeout.call(n,p)}else{m.call(n,p);b.fire("ajaxTimeout",q.transId,n)}}function l(t,m){var q=t.Ajax;window.clearTimeout(i[t.transId]);delete i[t.transId];if(q.readyState==4){b.fire("ajaxComplete",t.transId,q);if(q.status==200){if(m.dataType==="json"){var n=q.getResponseHeader("Content-Type");n=n.split(";")[0];if(n.trim()==="application/json"){var p=false;try{var r=M.encode(q.responseText)}catch(s){p=true;b.fire("ajaxError",s,q);c[t.transId]["failure"].call(m,q,s)}!p&&c[t.transId]["success"].call(m,q,r)}else{b.fire("ajaxError","header error",q);c[t.transId]["failure"].call(m,q)}}else{c[t.transId]["success"].call(m,q)}}else{b.fire("ajaxError","header error",q);c[t.transId]["failure"].call(m,q)}delete c[t.transId]}}function g(p,m){var n=p.Ajax;n.onreadystatechange=function(){l(p,m)}}var k={dataType:"",method:"POST",url:"",asynchronous:true,timeout:5000,success:function(){},failure:function(){},defaultHeaders:{"Content-Type":"application/x-www-form-urlencoded"},ajaxDone:function(m){b.on("ajaxComplete",m)},ajaxStart:function(m){b.on("ajaxStart",m)},ajaxError:function(m){b.on("ajaxError",function(o,n){m.call(n,n)})},ajaxTimeout:function(m){b.on("ajaxTimeout",function(o,n){m.call(n,n)})},headers:{},cache:true,coding:"UTF-8",transId:0,request:function(p){var m=this;M.applyIfNot(p,m,["request","defaultHeaders"]);if(!p.data){if(p.xml||p.params){var n=m.headers||{};if(!n||!n.ContentType){e("ContentType",p.xml?"text/xml":"application/json");p.data=p.xml||p.params}}}p.retry=function(){f(p)};return f(p)}};return k}();var a={};M.Net.ajax.ajaxStart(function(f){var d=document.body.scrollTop+10;var c=new M.Element("div",{id:"ajax-"+f,html:"",style:"-webkit-border-radius:30px;padding:5px;width:120px;position:absolute;z-index:999;right:10px;top:"+d+"px;height:30px;line-height:30px;background:#F00;color:#FFF;text-align:center;opacity: 0.4;"}).appendTo("body");var e=function(){if(f in a&&!!c.dom){var g=c.html();if(g.length>=10){g="-"}else{g+="-"}c.html(g);a[f]=setTimeout(e,200)}};a[f]=setTimeout(e,500)});M.Net.ajax.ajaxDone(function(c){window.clearTimeout(a[c]);M.getEl("#ajax-"+c).remove()})}());(function(){var a={};M.net.jsonp=function(d,e){var c;var b=function(){if(d in a){return !!e&&a[d]==2&&e()}var g=this;var f=g.dom.readyState;if("undefined"==typeof f||f=="loaded"||f=="complete"){a[d]=2;try{("function"==typeof e)&&e()}finally{g.remove()}}};a[d]=1;new M.Element("script",{src:d,events:{load:b,readystatechange:b}}).appendTo("head")}})();(function(c){if(!!!window.applicationCache){return false}var b=window.applicationCache;c.isOnline=function(){return navigator.onLine};var a=function(){window.location.reload()};c.ready(function(){if(b.status==b.UPDATEREADY){a()}else{b.addEventListener("updateready",function(){b.swapCache();a()},false)}})}(M));(function(a){a.Client={};a.ClientInstance=a.extend(a.Object,{init:function(){var b=this;this.stack=[];this.on("start",this.doLocate);this.on("start",function(c){b.fire(c,"start")})},onRequest:0,doLocate:function(){var c=this;if(c.stack.length>0){c.onRequest=true;var b=c.stack.shift();setTimeout(function(){a.locate(b)},20)}else{c.onRequest=false}},active:function(b,e,d){var c=this,e=e||{},f=e.id||a.genId();if(!c.modelList){c.modelList={}}if(!c.modelList[f]){c.on(f,function(){var g=Array.prototype.slice.call(arguments);g.shift();c.modelList[f].fire.apply(c.modelList[f],g);g.splice(0,0,"readyStateChange");c.modelList[f].fire.apply(c.modelList[f],g)});c.modelList[f]=b;e.id=f}c.stack.push(d+"://"+b.modelType+"/"+b.modelID.toLowerCase()+"?"+a.decodeParams(e));if(!c.onRequest){c.doLocate()}},remove:function(b){var c=this;c.un(b.modelID);for(var d in c.modelList){if(modelList[d]==b){delete modelList[d]}}}});a.clientInstance=new a.ClientInstance()}(M));(function(a){a.Client.Model=a.extend(a.Object,{prefix:"miliao",autoStart:1,init:function(){var e=this;if(!("modelID" in e)||!("modelType") in e){throw"no modelID or modelType found in model ";return false}for(var b in e){var d=e[b];if(b.indexOf("on")==0&&typeof d==="function"){var c=b.replace(/^on/,"");e.on(c,d)}}if(e.autoStart===1){e.start()}},start:function(){a.clientInstance.active(this,this.params,this.prefix)}})}(M));(function(a){a.Client.Recorder=a.extend(a.Client.Model,{modelID:"RECORDER",modelType:"resource"})}(M));(function(a){a.Client.Camera=a.extend(a.Client.Model,{modelID:"CAMERA",modelType:"resource"})}(M));(function(f){var d="SCHOOL,COMPANY,LOCATION,FRIEND_LIST,GROUP_FR_LIST,CONTACT_LIST,PHOTO,DOODLE,SINA_BIND,SMS,GIF,USER_PROFILE,CHECK_CLIENT".split(",");var a="SchoolSelector,CorpSelector,Location,FriendsSelector,GroupSelector,ContactSelector,PhotoSelector,Doodle,SinaBind,SMS,GifMaker,UserProfile,ClientCheck".split(",");var b="OPEN_NAMECARD".split(",");var e="Profile".split(",");var c;c=d.length;while(c--){f.Client[a[c]]=f.extend(f.Client.Model,{modelID:d[c],modelType:"resource"})}c=b.length;while(c--){f.Client[e[c]]=f.extend(f.Client.Model,{modelID:b[c],modelType:"control"})}f.Client.Close=function(){f.locate("miliao://control/close_webview?id=1")};f.Client.CheckApp=f.extend(f.Client.Model,{modelID:"check_app",modelType:"resource",start:function(){var g={local_url:this.local_url,packet_name:this.packet_name,};f.clientInstance.active(this,g,this.prefix)}})}(M));(function(a){a.Client.Player=a.extend(a.Client.Model,{modelID:"audio_player",modelType:"resource",autoStart:false,play:function(b){this.params=this.params||{};this.params.url=(b||this.url)||this.params.url;this.params.action="play";this.start()},pause:function(){this.params.action="pause";this.start()},stop:function(){this.params.action="stop";this.start()}})}(M));M.Client.HttpProxy=M.extend(M.Client.Model,{init:function(){M.Client.Model.prototype.init.call(this);this.on("failure,error",this.failure)},method:"get",retry:function(){},modelID:"httpproxy",modelType:"resource",timeout:5000,onsuccess:function(a){a=decodeURIComponent(a);var c,b=this;if(b.dataType=="json"){try{c=M.encode(a)}catch(d){b.fire("failure")}}if(b.success){b.success(a,c)}},start:function(){var c=[];if(this.params){for(var d in this.params){c.push(this.params+"=")}}var e={url:this.url,miapp:this.miapp||0,timeout:this.timeout,method:this.method.toUpperCase(),params:this.params||{}};if(e.method=="GET"&&!M.isEmptyObject(e.params)){var a=e.url.split("?");var b=a.length>1?M.params(e.url):{};M.merge(b,e.params);e.url=a[0]+"?"+M.decodeParams(b)}e.params=M.decodeParams(e.params);M.clientInstance.active(this,e,this.prefix)}});M.Client.NetListener=M.extend(M.Client.Model,{modelID:"network_listener",modelType:"resource"});(function(a){if(document.readyState==="complete"){!!window.onClientReady&&window.onClientReady()}else{M.ready(function(){!!window.onClientReady&&window.onClientReady()})}}(window));